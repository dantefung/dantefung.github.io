---
title: 十二、栈及栈操作的实现
date: 2020-10-13 10:19:40
tags:
  - 汇编
categories:
  - 汇编
---

# 十二、栈及栈操作的实现

## 栈结构

{% asset_img 2020-10-13-10-25-16.png %}

### 演示

{% asset_img 2020-10-13-10-28-04.png %}

**问题:**

1、CPU 如何知道一段内存空间被当作栈使用?
2、执行 push 和 pop 的时候，如何知道哪个单元是栈顶单元?

**回答:**

8086CPU 中，有两个与栈相关的寄存器:

|                   |                    |
| ----------------- | ------------------ |
| 栈段寄存器 SS     | 存放栈顶的段地址   |
| 栈顶指针寄存器 SP | 存放栈顶的偏移地址 |

## 栈操作

{% asset_img 2020-10-13-10-48-40.png %}

**预设代码：**

{% asset_img 2020-10-13-11-12-18.png %}

**单步跟踪：**
T 命令作用：执行汇编程序，单步跟踪。
T 命令的使用方式是 T [=地址] [指令数]。如果忽略“地址”的话，T 命令从 CS:IP 处开始运行。“指令数”是要单步执行的指令的数量。

{% asset_img 2020-10-14-14-08-09.png %}

{% asset_img 2020-10-14-14-10-22.png %}

{% asset_img 2020-10-14-14-11-44.png %}
